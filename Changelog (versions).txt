5e Combat Enhancer Changelog

//////////////////////////////////////////

Changelog / Added / Modified:
(Most of these can be reverted by commenting out the modification you don't want to use)
Versioning: v(Major.Minor.Patch) https://en.wikipedia.org/wiki/Software_versioning

v1.1.0 (December 26th, 2018) (major features)
- Created new loading icon.
- Version checking. Changed to check for version 3.3.7 as core of module is working for that version. [scripts/manager_versionchk.lua]
    Currently only works with regular image view panel, not the background versions added in 3.3.7, as it relies on layers support by https://www.fantasygrounds.com/forums/showthread.php?20231-Enhanced-Images-(layers)-for-FG-3-0-CoreRPG-(and-rulesets-based-on-CoreRPG).
- Combat tracker. Effects icon change. [graphics/graphics_buttons.xlm]
    Changed icon for effects in combat tracker to be the same as in the CoreRPG set (the little man/woman), and on the actions section of character sheets.
    Edited image to make it fit better with the others in the CT. Removed most of the sheen around the image, enlarged it, added a tint of brown to the image.
- Images in regular view given a black backround/mask color. Graphics based on default theme. [extension.xml]
- Blood Splatter and Pointer Graphics to Copy. Folder added containing blood splatter and pointer graphics. Open the folder for directions where to copy to make it work in-game.
- Fast deletion of Tokens. [scripts/modifications.lua]
    Deletes token from combat map for host, if left-clicked  while Alt key is held down.
    Deletes token from combat map and combat tracker for host, if left-clicked while Alt + Control keys are held down.
    ps. note that dead tokens are on the second layer, and blood splatter is on the third.        

v1.2.0 (December 27th, 2018) (major features)
- Horizontal health bars, slightly less than token width when full health, appear above token. Larger and more easily readable. Resize and relocate ratio wise to account for different grid and resolutions sizes. Light transparency added to health bar. [ new horizontal health bar graphics, graphics/graphics_icons.xml, manager_token2.lua > function updateHealthBarScale(tokenCT, nodeCT) ; function updateHealthHelper(tokenCT, nodeCT) ]
    Health bars dissapear when no health left (incapacitated/dead).            
- Dot health indicators roughly doubled in size for better readability. Resize and relocate ratio wise to account for different grid and resolutions sizes. [ updated graphics for health dot, relocated dot to align due to increased dimensions, manager_token2.lua > updateHealthHelper(tokenCT, nodeCT) ]

v1.2.1 (January 1st, 2019)(patch)
- Blood Splatter and Pointer Graphics to Copy.zip. Fixed directory instructions for "Where to place to work.txt". Set to default of "Fantasy Grounds Data/tokens/".
- Token highlight underlays made more transparent (20%), so the effect is softer and less visually distracting. Thanks to AlphaDecay for the suggestion. [11 instances of token.addUnderlay() in: scripts\modifications.lua, scripts\manager_token.lua (two spots in hilightHover, scripts\manager_maptoken.lua (one in prepMapToken, one in initMapTokens, one in initSingleToken, two in onCTMenuSelection), scripts\snap_token.lua (one in customTurnStart), ct\scripts\ct_token.lua (two in onHover), ct\scripts\ct_entry.lua (one in activeHighlight)]
    Constant colors used are set in scripts/modifications.lua (TOKENUNDERLAYCOLOR_1, TOKENUNDERLAYCOLOR_2, TOKENUNDERLAYCOLOR_3). You can change them there and they will be changed over the whole extension in the appropriate places after save and reload.
    Replaced in files: AA00FF00 with 3300FF00, AAF9FF44 with 33F9FF44, AA0000FF with 330000FF.
    First two numbers/letters refer to the alpha channel or transparency levels. Alpha channel (ranging from 0-255) in hex, opacity at 40% = 66, 30% = 4D , 20% = 33, 10% = 1A    
- Incorrect console message on version checking. Referred to Advanced Kombat, fixed to refer to 5e Combat Enhancer. [manager_versionchk.lua]

v1.3.0 (January 13th, 2019) (major features)
NOW FULLY COMPATABLE WITH FG 3.3.7.
- Compatability added for FG 3.3.7 background image options. 
- Layers support for background images. Updated project with new code from Enhanced Images extension, https://www.fantasygrounds.com/forums/showthread.php?20231-Enhanced-Images-(layers)-for-FG-3-0-CoreRPG-(and-rulesets-based-on-CoreRPG. [campaign/record_image.xml]
    [campaign/scripts/manager_maptoken.lua] modified code to support background image panels and to work with updated Enhanced Images code
    [campaign/scripts/image.lua] modified code to support background image panels and to work with updated Enhanced Images code
    [campaign/record_image.xml] overwritten with code from Enhanced Images: campaign/updated_record_image.xml
    [campaign/scripts/updated_image.lua] added
    [campaign/scripts/updated_imagewindow.lua] added, replacing older imagewindow.lua, references updated to point to updated_imagewindow.lua
- Added clear saves button to all image panel types (regular/background). [scripts/manager_maptoken.lua] [campaign/record_image.xml]       
- Black mask (fog of war) for all image versions, regular and background. [extension.xml, graphics/frames/imagepanel v2.png]    
- Added check for left-click only activation for alt and alt+ctrl mouse clicks on tokens [modifications.lua, onClickDown]
- Changed background image buttons from Test version to smaller Live version editions by removing prior image refernces in xml, defaulting to default. [graphics/icons.xml]
- Changed image grid menu item buttons to the smaller default graphics. For better readbility and distinction from layers button graphics. [template_toolbar.xml]
- Removed a number of unneeded console outputs that happened during runtime.
- Blood splatter code changed to work with backgound image layers as well. [scripts/manager_token2.lua > function createSplatter(tokenCT,nodeCT,targetLayer), function updateStatusOverlayWidgetHelper(tokenCT,nodeCT,targetLayer)]    
- Shift+left mouse click, ping and move view for players to gm focus now working with backgound images as well. [campaign/record_image.xml] 
- Double-clicking Token on battlemap, now opens up character or NPC dialogue window, similarly to the default behaviour in FG. [scripts/modifications.lua > function onInit(), function onDoubleClick(tokenMap, vImage)]

v1.4.0 (January 21st, 2019) (major features)
- Updates to COPYRIGHT.txt. Copyright text updates across project to point to the COPYRIGHT.txt file for details as applicable.
- Features and patches split into: 'Changelog (versions).txt' and 'TODO, Wishlist.txt'. 
- Refractoring:
    'scripts/modifications.lua' renamed to '5e_combat_enhancer.lua', name changed to 'CombatEnhancer', references in code fixed to point to renamed script and name. 
    'updated_image.lua' from Enhanced layers extension deleted, as all code updates have been updated to image.lua which includes a lot of additional code for this extension. 
    'campaign/scripts/toolbar_draw.lua' deleted as I've written updated code to switch between layers when masking button used in 'campaign/record_image.xml'.
- Menu items added under new menu heading of '5e Combat Enhancer' with various functionality: [extension.xml, script/5e_combat_enhancer > registerMenuItems(), onInit()]
    Change the opacity of GM token underlays colors, ranging from 100%-10%. 20% recommended for best appearance. [scripts/5e_combat_enhancer > updateUnderlayOpacity(), onInit()]            
    Turn on of off drawing blood on tokens as they take damage. [scripts/manager_token2.lua > updateStatusOverlayWidget(tokenCT,nodeCT)]
    Turn on or off drawing of skull on death. [scripts/manager_token2.lua > updateStatusOverlayWidget(tokenCT,nodeCT)]
    Turn on or off blood splatter rendering on death. [scripts/manager_token2.lua > createSplatter(tokenCT,nodeCT,targetLayer)]
    Turn on or off to show NPC death clearly in the CT by fading the entry. [ct/scripts/clientct_entry.lua > updateDisplay(), ct/scripts/ct_entry.lua > updateDisplay()]
    Turn on or off to show NPC death by fading effects icons on top of token. 
    Scaling options for blood splatters on token death, default x1 - x3. [scripts/manager_token2.lua > createSplatter(tokenCT,nodeCT,targetLayer)]        
- Clear saves button only appears if there are tokens on the battle map. [campaign/record_image.xml]   
- Clear saves button was to close to the edge. Fixed. [campaign/record_image.xml]
- Moved double-click to open token information window (PC or NPC) to ctrl + left-click. This was done to enable the window to open up on top of the CT, due to the way the code is layed out. [scripts/5e_combat_enhancer > openTokenInformationWindow(tokenMap, vImage), scripts/snap_token.lua > onClickRelease(target, button, image)]
- Pressing masking button will do the following now: If not on background (image) layer, switch to background (image) layer and enable masking tool. If on background layer, disable masking tool and switch to top (play) layer. [campaign/record_image.xml > toolbar_draw > function onButtonPress(id) ; for both instances of toolbar_draw, one for floating image, one for background image]

v1.4.1 (January 21st, 2019) (patch)
- Removed 'Chat and modifiers on top (full screen)' menu item, as only part of development testing, not intended for public release. [scripts/5e_combat_enhancer.lua > registerMenuItems()]
- Menu item added: Turn on or off token condition icon color fade on death. [scripts/5e_combat_enhancer.lua > registerMenuItems(), scripts/manager_token2.lua > updateEffectsHelper(tokenCT, nodeCT)]
- Moved ctrl-click to open token information window (PC or NPC) to shift + left-click, due to overlapping functionality for selecting target with ctrl + left-click. [scripts/snap_token.lua > onClickRelease(target, button, image)]